<h1 class="text-center text-4xl font-bold italic my-12 sp">
    {{ 'wishlist.title' | translate }}
</h1>

@if (isLoading) {
<p class="text-center text-lg italic">Loading...</p>
}
@else if (hasError) {
<p class="text-center text-lg text-red-600 italic">Failed to load wishlist.</p>
}
@else if (wishlistItems.length === 0) {
<p class="text-2xl text-[#003F3F] text-center italic my-10 fade-in">
    {{ 'wishlist.empty' | translate }}
</p>
}
@else {
<!-- Desktop Table -->
<div class="hidden md:block overflow-x-auto px-4">
    <table class="w-full table-auto border-separate border-spacing-y-4 cartbg">
        <thead>
            <tr class="text-left text-[#003F3F] text-md border-b">
                <th class="p-2">{{ 'wishlist.table.item' | translate }}</th>
                <th class="p-2">{{ 'wishlist.table.price' | translate }}</th>
                <th class="p-2">{{ 'wishlist.table.category' | translate }}</th>
                <th class="p-2">{{ 'wishlist.table.actions' | translate }}</th>
            </tr>
        </thead>
        <tbody class="bg-white">
            @for (item of wishlistItems; track item._id) {
            <tr class=" shadow-md rounded-md">
                <td class="flex items-center gap-4 p-2">
                    <img [src]="item.imageCover" alt="product" class="w-20 h-20 object-cover rounded" />
                    <div>
                        <h4 class="font-semibold text-[#003F3F]">{{ item.title }}</h4>
                    </div>
                </td>
                <td class="p-2">${{ item.price.toFixed(2) }}</td>
                <td class="p-2">{{ item.category.name || 'N/A' }}</td>
                <td class="p-2">
                    <button (click)="toggleWishlist(item._id)"
                        class="text-red-600 hover:text-red-800 transition font-medium cursor-pointer">
                        <i class="fas fa-trash-can"></i> {{ 'wishlist.remove' | translate }}
                    </button>
                </td>
                <td class="p-2">
                    <button (click)="addProductToCart(item._id)"
                        class="bg-green-500 hover:bg-green-600 cursor-pointer text-white px-3 py-1.5 text-sm rounded-md transition shadow-sm">
                        <i class="fas fa-shopping-cart mr-1"></i> {{ 'details.addToCart' | translate }}
                    </button>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>

<!-- Mobile View -->
<div class="md:hidden flex flex-col gap-6 px-4">
    @for (item of wishlistItems; track item._id) {
    <div class="bg-white cartbg shadow rounded-lg p-4 flex flex-col gap-3">
        <div class="flex gap-4">
            <img [src]="item.imageCover" alt="product" class="w-24 h-24 object-cover rounded" />
            <div class="flex flex-col justify-between">
                <h4 class="font-semibold text-[#003F3F] text-lg">{{ item.title }}</h4>
                <p class="text-sm text-gray-600">{{ item.category.name }}</p>
                <p class="text-md text-green-700 font-semibold">${{ item.price.toFixed(2) }}</p>
            </div>
        </div>
        <div class="flex justify-between mt-2">
            <button (click)="removeFromWishlist(item._id)" class="text-red-600 hover:text-red-800 text-sm font-medium">
                <i class="fas fa-trash-can"></i> {{ 'wishlist.remove' | translate }}
            </button>
            <button (click)="addProductToCart(item._id)"
                class="bg-green-500 hover:bg-green-600 cursor-pointer text-white px-3 py-1.5 text-sm rounded-md transition shadow-sm">
                <i class="fas fa-shopping-cart mr-1"></i> {{ 'details.addToCart' | translate }}
            </button>
        </div>
    </div>
    }
</div>
}